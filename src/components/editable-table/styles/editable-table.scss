%editable-table__error-message {
  display: block;
  font-size: 0.5em;
  line-height: 1;
  padding: 0.5em;
  text-align: left;
}

.editable-table {
  --editable-table-font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Segoe UI", "Yu Gothic", YuGothic, sans-serif;
  --editable-table-bg-color: 255, 255, 255;
  --editable-table-fg-color: 32, 32, 32;
  --editable-table-header-color: 224, 224, 224;
  --editable-table-accent-color: 0, 128, 240;
  --editable-table-notice-color: 255, 0, 0;
  --editable-table-border-color: 192, 192, 192;

  color: rgba(var(--editable-table-fg-color), 1.0);
  font-family: var(--editable-table-font-family);
  font-size: 1rem;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  overflow: scroll;

  &,
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  table {
    border-spacing: 0;
  }

  th,
  td {
    background-clip: padding-box;
    border-right: 1px solid rgba(var(--editable-table-border-color), 1.0);
    border-bottom: 1px solid rgba(var(--editable-table-border-color), 1.0);
    cursor: default;
    user-select: none;
    vertical-align: middle;
  }

  th {
    background-color: rgba(var(--editable-table-header-color), 1.0);
    padding: 0 0.5em;
    position: sticky;
    white-space: nowrap;
  }
  thead th {
    top: 0;
    z-index: 2;
  }
  thead tr:first-child th {
    border-top: 1px solid rgba(var(--editable-table-border-color), 1.0);
  }
  thead tr:first-child th:first-child,
  tbody th {
    border-left: 1px solid rgba(var(--editable-table-border-color), 1.0);
  }
  thead tr:first-child th:first-child {
    left: 0;
    z-index: 3;
  }
  tbody th {
    left: 0;
    z-index: 1;
  }

  // WANT: 諸々の理由から thead th の高さを固定している
  $editable-table--row-height: 2.5em;
  thead th {
    height: $editable-table--row-height;
  }
  thead tr:nth-child(2) th {
    top: $editable-table--row-height;
  }

  td {
    background-color: rgba(var(--editable-table-bg-color), 1.0);
    position: relative;
    white-space: pre;
    &[data-required-type="boolean"] {
      text-align: center;
    }
    &[data-required-type="number"] {
      text-align: right;
    }
    &[data-type-is-valid="false"] {
      background-color: rgba(var(--editable-table-notice-color), 1.0);
      color: rgba(var(--editable-table-bg-color), 1.0);

      &[data-is-editing="false"]::before {
        @extend %editable-table__error-message;
        content: "正しい値ではありません";
      }
    }
    &[data-is-required="true"][data-is-empty="true"] {
      background-color: rgba(var(--editable-table-notice-color), 1.0);
      color: rgba(var(--editable-table-bg-color), 1.0);

      &[data-is-editing="false"]::before {
        @extend %editable-table__error-message;
        content: "入力必須項目です";
      }
    }
    &[data-is-ruled="false"] {
      background-color: rgba(var(--editable-table-notice-color), 1.0);
      color: rgba(var(--editable-table-bg-color), 1.0);

      &[data-is-editing="false"]::before {
        @extend %editable-table__error-message;
        content: "正しい値ではありません";
      }
    }
    &[data-is-focused="true"]::after {
      border: 3px solid rgba(var(--editable-table-accent-color), 1.0);
      content: "";
      display: block;
      pointer-events: none;
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
    }
    &[data-is-editing="true"] {
      background-color: rgba(var(--editable-table-accent-color), 0.125);
    }
  }

  @import "./extensions/array-extension";
  @import "./extensions/boolean-extension";
  @import "./extensions/button-extension";
  @import "./extensions/link-extension";
  @import "./extensions/radio-extension";
  @import "./extensions/select-extension";
  @import "./extensions/string-extension";
  @import "./extensions/text-extension";

  &--label {
    line-height: 1.25;
    padding: 0.5em;
    [data-is-disabled="true"] & {
      opacity: 0.5;
    }
  }
}
